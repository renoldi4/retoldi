<!DOCTYPE html>
<head>
    <title>Login</title>
<style>
    <style>
    body {
        font-family: 'Arial', sans-serif;
        text-align: center;
        background-color: #94c4c9;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
    }

    h1 {
        color: #333;
    }

    form {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        max-width: 300px;
        margin: 0 auto;
    }

    label {
        display: block;
        margin: 10px 0 5px;
        color: #555;
    }

    input {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    input[type="submit"] {
        background-color: #4caf50;
        color: #fff;
        cursor: pointer;
    }

    #esito {
        display: none;
        margin-top: 15px;
    }

    #testoEsito {
        color: #fff;
        padding: 10px;
        border-radius: 4px;
    }

    #esito[data-success="true"] {
        background-color: #00ac00;
    }

    #esito[data-success="false"] {
        background-color: #ff0000;
    }
</style>
</style>
</head>
<body style="background-color:#94c4c9;">
    <h1>Login</h1>
    
    <form onsubmit="controllo(); return false;">
        <label for="user">Email:</label>
        <input type="text" id="user" name="user" required autofocus>
        <br>
        
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required>
        <br>
        
        <input type="submit" value="Invia">
    </form>

    <div id="esito" style="display: none;">
        <p id="testoEsito"></p>
    </div>

    <script>
        let dominio = [".com", ".it", ".edu.it"];

let caratteriSpeciali = ["&", "%", "!", "(", ")", "?", "^", "+", "[", "]", ".", ",", "_"];

function controllo() {

    let esito = document.getElementById("esito");
    
    let ris = document.getElementById("testoEsito");

    esito.style.display = "block";

    if(controlloUser() && controlloPassword()) {

        esito.style.backgroundColor = "rgba(0, 172, 0, 0.607)";

        ris.innerHTML = "Accesso consentito";

    } else {

        esito.style.backgroundColor = "rgba(255, 0, 0, 0.585)";

        ris.innerHTML = "Accesso negato";
    }
}

function controlloUser() {

    let username = document.getElementById("user").value;

    if(username.includes('@') && username.indexOf("@") != 0) {

        for(let i = 0; i < username.indexOf("@"); i++) {

            if((username.charCodeAt(i) > 48 && username.charCodeAt(i) < 57) || (username.charCodeAt(i) > 65 && username.charCodeAt(i) <= 122) || username.charCodeAt(i) == 46) {
                
                continue;

            } else {

                alert("Carattere vietato");

                return false;
            }
        }

        let dominioM = username.substring(username.indexOf(".", username.indexOf("@")));

        if(dominio.includes(dominioM) && (username.indexOf("@") - username.indexOf(".", username.indexOf("@"))) != -1) {

            for(let i = username.indexOf("@") + 1; i < username.indexOf(".", username.indexOf("@")); i++) {

                if((username.charCodeAt(i) >= 48 && username.charCodeAt(i) <= 57) || (username.charCodeAt(i) >= 97 && username.charCodeAt(i) <= 122) || username.charCodeAt(i) == 46) {
                
                    continue;
    
                } else {
    
                    alert("Errore: hai insetito un carattere vietato");
    
                    return false;
                }
            }

            return true;

        } else {

            alert("Errore: dominio non riconosciuto");

            return false;
        }
    }

    alert("Utente non valido");
    
    return false;
}

function controlloPassword() {

    let password = document.getElementById("password").value;

    let controlloUp = false;

    let controlloNumero = false;

    let controlloCS = false;

    if(password.length != 0) {

        if(password.length >= 8) {

            for(let i = 0; i < password.length; i++) {

                if((password.charCodeAt(i) >= 65 && password.charCodeAt(i) <= 90) || (password.charCodeAt(i) >= 48 && password.charCodeAt(i) <= 57) || (password.charCodeAt(i) >= 97 && password.charCodeAt(i) <= 122) || caratteriSpeciali.includes(password.charAt(i))) {

                    if(password.charAt(i) == password.charAt(i).toUpperCase()) {
    
                        controlloUp = true;
                    }
        
                    if(["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"].includes(password.charAt(i))) {
        
                        controlloNumero = true;
                    }
    
                    if(caratteriSpeciali.includes(password.charAt(i))) {
    
                        controlloCS = true;
                    }

                } else {
                    
                    alert("Hai inserito un carattere non valido");

                    return false;

                }
            }
    
            if(controlloUp) {

                if(!controlloNumero) {

                    alert("La password deve contenere almeno un numero");
    
                    return false;
                }
                
                if(!controlloCS) {

                    alert("La password deve contenere almeno un carattere speciale");
    
                    return false;
                }
    
                return true;
    
            } else {
    
                alert("La password deve contenere almeno una lettera maiuscola");
    
                return false;
            }
        
        } else {
    
            alert("La password deve contenere almeno 8 caratteri");
    
            return false;
        }

    } else {

        alert("Inserire una password");
    }
}
    </script>
</body>
</html>
